function initialize() {
  var map;
  var elevator;
  var mapOptions = {
    zoom: 14,
    center: { lat: 42.3581, lng: -71.0636},
    disableDefaultUI: true
  };
  map = new google.maps.Map(document.getElementById('map-canvas'), mapOptions);


  var addresses = <%= Listing.addresses %>;
  var bounds = new google.maps.LatLngBounds();
  for (var x = 0; x < addresses.length; x++) {
    $.getJSON('https://maps.googleapis.com/maps/api/geocode/json?address='+addresses[x]+'&sensor=false', null, function (data) {
      var p = data.results[0].geometry.location
      var latlng = new google.maps.LatLng(p.lat, p.lng);
      new google.maps.Marker({
        position: latlng,
        map: map
      });
      bounds.extend(latlng)
    });
  }
  map.fitBounds(bounds);
  map.setCenter(bounds.getCenter());
};


google.maps.event.addDomListener(window, 'load', initialize);
